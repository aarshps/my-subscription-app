<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription Tracker</title>
    <!-- Google Fonts - Roboto -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Link to Stylesheet -->
    <link rel="stylesheet" href="style.css">
    <!-- Google Identity Services Library -->
    <script src="https://accounts.google.com/gsi/client" defer></script>
</head>
<body>

    <header class="app-header">
        <h1>My Subscriptions & Bills</h1>
        <div id="auth-status">
            <!-- User Info (Initially hidden by JS logic, but exists in DOM) -->
            <span id="user-info" style="display: none;"></span>
            <!-- Logout Button (Initially hidden by JS logic, but exists in DOM) -->
            <button id="logout-button" class="button" style="display: none;">Sign Out</button> <!-- Added class="button" for consistency -->
            <!-- Loading Indicator -->
            <span id="auth-loading" style="display: none; font-style: italic;">Initializing...</span>
        </div>
    </header>

    <!-- Logged Out View (Ensuring ID is correct) -->
    <div id="login-container">
        <h2>Welcome to the Subscription Tracker</h2>
        <p>Keep track of your recurring bills and subscriptions.</p>
        <p>Sign in with Google to get started.</p>
        <!-- Google Button Container -->
        <div id="google-signin-button-container">
            <!-- GSI button renders here -->
        </div>
         <p id="init-error-message" class="error-message" style="display: none; margin-top: 15px;"></p>
    </div>

    <!-- Logged In View (Initially Hidden by JS/CSS) -->
    <main id="app-content">
        <div id="subscription-list">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Recurrence (Months)</th>
                        <th>Day of Month</th>
                        <th>Last Paid Month</th>
                        <th>Timeline (Next Payment)</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="subscription-table-body">
                    <!-- Rows generated by JS -->
                </tbody>
            </table>
            <p id="loading-message" style="display: none;">Loading subscriptions...</p>
            <p id="empty-message" style="display: none;">No subscriptions added yet.</p>
        </div>
        <!-- Add Button -->
        <button id="add-btn" class="fab">+</button>
    </main>

    <!-- Add Form Modal (Initially Hidden by JS/CSS) -->
    <div id="add-form-modal" class="modal">
         <div class="modal-content">
            <span class="close-btn" title="Close">Ã—</span>
            <h2>Add New Subscription/Bill</h2>
            <form id="add-subscription-form">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="recurrence-months">Recurs Every (Months):</label>
                <input type="number" id="recurrence-months" name="recurrenceMonths" min="1" value="1" required>

                <label for="recurrence-day">Day of Month:</label>
                <input type="number" id="recurrence-day" name="recurrenceDayOfMonth" min="1" max="31" value="1" required>

                <label for="last-paid-month">Last Paid Month:</label>
                <input type="month" id="last-paid-month" name="lastPaidMonth" required>

                <div class="form-actions">
                   <button type="submit" class="button button-primary">Add Item</button>
                </div>
                <p id="form-error" class="error-message" style="display: none;"></p>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>